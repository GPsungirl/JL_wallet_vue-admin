(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e68df05"],{"037b":function(e,t,a){"use strict";var n=a("f33c"),r=a.n(n);r.a},"1b9e":function(e,t,a){"use strict";var n=a("2f27"),r=a.n(n);r.a},"2f27":function(e,t,a){},4127:function(e,t,a){"use strict";var n=a("d233"),r=a("b313"),o={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},i=Date.prototype.toISOString,l={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return i.call(e)},skipNulls:!1,strictNullHandling:!1},s=function e(t,a,r,o,i,s,c,u,d,p,f,g){var m=t;if("function"===typeof c)m=c(a,m);else if(m instanceof Date)m=p(m);else if(null===m){if(o)return s&&!g?s(a,l.encoder):a;m=""}if("string"===typeof m||"number"===typeof m||"boolean"===typeof m||n.isBuffer(m)){if(s){var v=g?a:s(a,l.encoder);return[f(v)+"="+f(s(m,l.encoder))]}return[f(a)+"="+f(String(m))]}var h,y=[];if("undefined"===typeof m)return y;if(Array.isArray(c))h=c;else{var b=Object.keys(m);h=u?b.sort(u):b}for(var _=0;_<h.length;++_){var w=h[_];i&&null===m[w]||(y=Array.isArray(m)?y.concat(e(m[w],r(a,w),r,o,i,s,c,u,d,p,f,g)):y.concat(e(m[w],a+(d?"."+w:"["+w+"]"),r,o,i,s,c,u,d,p,f,g)))}return y};e.exports=function(e,t){var a=e,i=t?n.assign({},t):{};if(null!==i.encoder&&void 0!==i.encoder&&"function"!==typeof i.encoder)throw new TypeError("Encoder has to be a function.");var c="undefined"===typeof i.delimiter?l.delimiter:i.delimiter,u="boolean"===typeof i.strictNullHandling?i.strictNullHandling:l.strictNullHandling,d="boolean"===typeof i.skipNulls?i.skipNulls:l.skipNulls,p="boolean"===typeof i.encode?i.encode:l.encode,f="function"===typeof i.encoder?i.encoder:l.encoder,g="function"===typeof i.sort?i.sort:null,m="undefined"!==typeof i.allowDots&&i.allowDots,v="function"===typeof i.serializeDate?i.serializeDate:l.serializeDate,h="boolean"===typeof i.encodeValuesOnly?i.encodeValuesOnly:l.encodeValuesOnly;if("undefined"===typeof i.format)i.format=r["default"];else if(!Object.prototype.hasOwnProperty.call(r.formatters,i.format))throw new TypeError("Unknown format option provided.");var y,b,_=r.formatters[i.format];"function"===typeof i.filter?(b=i.filter,a=b("",a)):Array.isArray(i.filter)&&(b=i.filter,y=b);var w,k=[];if("object"!==typeof a||null===a)return"";w=i.arrayFormat in o?i.arrayFormat:"indices"in i?i.indices?"indices":"repeat":"indices";var x=o[w];y||(y=Object.keys(a)),g&&y.sort(g);for(var I=0;I<y.length;++I){var j=y[I];d&&null===a[j]||(k=k.concat(s(a[j],j,x,u,d,p?f:null,b,g,m,v,_,h)))}var A=k.join(c),O=!0===i.addQueryPrefix?"?":"";return A.length>0?O+A:""}},4328:function(e,t,a){"use strict";var n=a("4127"),r=a("9e6a"),o=a("b313");e.exports={formats:o,parse:r,stringify:n}},"9e6a":function(e,t,a){"use strict";var n=a("d233"),r=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},i=function(e,t){for(var a={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,l=n.split(t.delimiter,i),s=0;s<l.length;++s){var c,u,d=l[s],p=d.indexOf("]="),f=-1===p?d.indexOf("="):p+1;-1===f?(c=t.decoder(d,o.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(d.slice(0,f),o.decoder),u=t.decoder(d.slice(f+1),o.decoder)),r.call(a,c)?a[c]=[].concat(a[c]).concat(u):a[c]=u}return a},l=function(e,t,a){for(var n=t,r=e.length-1;r>=0;--r){var o,i=e[r];if("[]"===i)o=[],o=o.concat(n);else{o=a.plainObjects?Object.create(null):{};var l="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.slice(1,-1):i,s=parseInt(l,10);!isNaN(s)&&i!==l&&String(s)===l&&s>=0&&a.parseArrays&&s<=a.arrayLimit?(o=[],o[s]=n):o[l]=n}n=o}return n},s=function(e,t,a){if(e){var n=a.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,i=/(\[[^[\]]*])/g,s=o.exec(n),c=s?n.slice(0,s.index):n,u=[];if(c){if(!a.plainObjects&&r.call(Object.prototype,c)&&!a.allowPrototypes)return;u.push(c)}var d=0;while(null!==(s=i.exec(n))&&d<a.depth){if(d+=1,!a.plainObjects&&r.call(Object.prototype,s[1].slice(1,-1))&&!a.allowPrototypes)return;u.push(s[1])}return s&&u.push("["+n.slice(s.index)+"]"),l(u,t,a)}};e.exports=function(e,t){var a=t?n.assign({},t):{};if(null!==a.decoder&&void 0!==a.decoder&&"function"!==typeof a.decoder)throw new TypeError("Decoder has to be a function.");if(a.ignoreQueryPrefix=!0===a.ignoreQueryPrefix,a.delimiter="string"===typeof a.delimiter||n.isRegExp(a.delimiter)?a.delimiter:o.delimiter,a.depth="number"===typeof a.depth?a.depth:o.depth,a.arrayLimit="number"===typeof a.arrayLimit?a.arrayLimit:o.arrayLimit,a.parseArrays=!1!==a.parseArrays,a.decoder="function"===typeof a.decoder?a.decoder:o.decoder,a.allowDots="boolean"===typeof a.allowDots?a.allowDots:o.allowDots,a.plainObjects="boolean"===typeof a.plainObjects?a.plainObjects:o.plainObjects,a.allowPrototypes="boolean"===typeof a.allowPrototypes?a.allowPrototypes:o.allowPrototypes,a.parameterLimit="number"===typeof a.parameterLimit?a.parameterLimit:o.parameterLimit,a.strictNullHandling="boolean"===typeof a.strictNullHandling?a.strictNullHandling:o.strictNullHandling,""===e||null===e||"undefined"===typeof e)return a.plainObjects?Object.create(null):{};for(var r="string"===typeof e?i(e,a):e,l=a.plainObjects?Object.create(null):{},c=Object.keys(r),u=0;u<c.length;++u){var d=c[u],p=s(d,r[d],a);l=n.merge(l,p,a)}return n.compact(l)}},b313:function(e,t,a){"use strict";var n=String.prototype.replace,r=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return n.call(e,r,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},d233:function(e,t,a){"use strict";var n=Object.prototype.hasOwnProperty,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e){var t;while(e.length){var a=e.pop();if(t=a.obj[a.prop],Array.isArray(t)){for(var n=[],r=0;r<t.length;++r)"undefined"!==typeof t[r]&&n.push(t[r]);a.obj[a.prop]=n}}return t},i=function(e,t){for(var a=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)"undefined"!==typeof e[n]&&(a[n]=e[n]);return a},l=function e(t,a,r){if(!a)return t;if("object"!==typeof a){if(Array.isArray(t))t.push(a);else{if("object"!==typeof t)return[t,a];(r.plainObjects||r.allowPrototypes||!n.call(Object.prototype,a))&&(t[a]=!0)}return t}if("object"!==typeof t)return[t].concat(a);var o=t;return Array.isArray(t)&&!Array.isArray(a)&&(o=i(t,r)),Array.isArray(t)&&Array.isArray(a)?(a.forEach(function(a,o){n.call(t,o)?t[o]&&"object"===typeof t[o]?t[o]=e(t[o],a,r):t.push(a):t[o]=a}),t):Object.keys(a).reduce(function(t,o){var i=a[o];return n.call(t,o)?t[o]=e(t[o],i,r):t[o]=i,t},o)},s=function(e,t){return Object.keys(t).reduce(function(e,a){return e[a]=t[a],e},e)},c=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},u=function(e){if(0===e.length)return e;for(var t="string"===typeof e?e:String(e),a="",n=0;n<t.length;++n){var o=t.charCodeAt(n);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?a+=t.charAt(n):o<128?a+=r[o]:o<2048?a+=r[192|o>>6]+r[128|63&o]:o<55296||o>=57344?a+=r[224|o>>12]+r[128|o>>6&63]+r[128|63&o]:(n+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(n)),a+=r[240|o>>18]+r[128|o>>12&63]+r[128|o>>6&63]+r[128|63&o])}return a},d=function(e){for(var t=[{obj:{o:e},prop:"o"}],a=[],n=0;n<t.length;++n)for(var r=t[n],i=r.obj[r.prop],l=Object.keys(i),s=0;s<l.length;++s){var c=l[s],u=i[c];"object"===typeof u&&null!==u&&-1===a.indexOf(u)&&(t.push({obj:i,prop:c}),a.push(u))}return o(t)},p=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},f=function(e){return null!==e&&"undefined"!==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};e.exports={arrayToObject:i,assign:s,compact:d,decode:c,encode:u,isBuffer:f,isRegExp:p,merge:l}},ee13:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pad_5"},[a("div",{staticClass:"query_fields"},[a("el-form",{ref:"queryForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryForm,size:"mini"}},[a("el-form-item",{attrs:{label:"机构名称",prop:"agentName"}},[a("el-input",{staticClass:"wid_140",attrs:{placeholder:"请输入机构名称"},model:{value:e.queryForm.agentName,callback:function(t){e.$set(e.queryForm,"agentName",t)},expression:"queryForm.agentName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收益周期",prop:"profitTime"}},[a("el-date-picker",{staticClass:"wid_140",attrs:{type:"month","value-format":"yyyy-MM",placeholder:"请选收益周期"},model:{value:e.queryForm.profitTime,callback:function(t){e.$set(e.queryForm,"profitTime",t)},expression:"queryForm.profitTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"审核状态",prop:"check_status"}},[a("el-select",{staticClass:"wid_140",attrs:{placeholder:"请选择收益状态"},model:{value:e.queryForm.check_status,callback:function(t){e.$set(e.queryForm,"check_status",t)},expression:"queryForm.check_status"}},e._l(e.queryForm.check_statuss,function(e,t){return a("el-option",{key:t,attrs:{label:e.txt,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"出账状态",prop:"revenue_status"}},[a("el-select",{staticClass:"wid_140",attrs:{placeholder:"请选择出账状态"},model:{value:e.queryForm.revenue_status,callback:function(t){e.$set(e.queryForm,"revenue_status",t)},expression:"queryForm.revenue_status"}},e._l(e.queryForm.revenue_statuss,function(e,t){return a("el-option",{key:t,attrs:{label:e.txt,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.queryData}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.resetData("queryForm")}}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handle_refresh}},[e._v("刷新")]),e._v(" "),4!=e.roleId&&5!=e.roleId?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.exportAccount}},[e._v("导出出账")]):e._e()],1)],1)],1),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"agentName",label:"机构名称",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"virtualMonthTotal",label:"贝壳收益(元)",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountMonthTotal",label:"出行收益(元)",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalAmont",label:"总收益(元)",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"month",label:"收益周期",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"审核状态",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.check_status?a("span",[e._v("待审核")]):2==t.row.check_status?a("span",[e._v("通过")]):3==t.row.check_status?a("span",[e._v("拒绝")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"出账状态",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.revenue_status?a("span",[e._v("待开票")]):2==t.row.revenue_status?a("span",[e._v("已开票")]):3==t.row.revenue_status?a("span",[e._v("待发放")]):4==t.row.revenue_status?a("span",[e._v("已发放")]):5==t.row.revenue_status?a("span",[e._v("财务拒绝")]):6==t.row.revenue_status?a("span",[e._v("数据错误")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.view_upload(t.row)}}},[e._v("查看发票")]),e._v(" "),4!=e.roleId&&5!=e.roleId&&1!=e.roleId&&2==t.row.check_status&&4!=t.row.revenue_status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handle_exportAccount(t.row)}}},[e._v("出账")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"block mar_t10"},[a("el-pagination",{attrs:{"current-page":e.currentPage,total:e.pageTotal,background:"",layout:"total, prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.invoice_loading,expression:"invoice_loading"}],attrs:{title:"上传发票",visible:e.add_dialog,width:"30%",center:"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"update:visible":function(t){e.add_dialog=t}}},[a("div",{staticClass:"wid_b75"},[a("el-upload",{ref:"uploadRef",attrs:{action:"#","http-request":e.handleUpload,"before-upload":e.beforeInvoiceUpload,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-exceed":e.limitTip,limit:1}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{staticClass:"invoiceimg_wrap",attrs:{title:"查看发票",visible:e.invoiceDialogVisible,"append-to-body":"",center:"",top:"10vh"},on:{"update:visible":function(t){e.invoiceDialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.add_dialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveData}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.view_loading,expression:"view_loading"}],attrs:{title:"查看发票",visible:e.view_dialog,width:"30%",center:"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"update:visible":function(t){e.view_dialog=t}}},[a("img",{attrs:{width:"100%",src:e.viewImageUrl,alt:""}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.view_dialog=!1}}},[e._v("取 消")])],1)])],1)},r=[],o=(a("7f7f"),a("db72")),i=a("2f62"),l=a("cf45"),s=(a("4328"),a("bc3a"),a("3438")),c=a.n(s),u={name:"agentAccountRecord",data:function(){return{roleId:"",cos:"",Bucket:"",Region:"",tableLoading:!1,view_loading:!1,tableData:[],invoice_loading:!1,invoiceDialogVisible:!1,queryForm:{agentName:"",profitTime:"",check_statuss:[{id:1,txt:"待审核"},{id:2,txt:"通过"},{id:3,txt:"拒绝"}],check_status:"",revenue_statuss:[{id:1,txt:"待开票"},{id:2,txt:"已开票"},{id:3,txt:"待发放"},{id:4,txt:"已发放"},{id:5,txt:"财务拒绝"},{id:6,txt:"数据错误"}],revenue_status:""},pageTotal:0,currentPage:1,add_dialog:!1,view_dialog:!1,dialogImageUrl:"",viewImageUrl:"",agent_accountid:"",_key:""}},created:function(){this.roleId=this.$store.getters.roleId,console.log(this.roleId),this.getCOSParam(),this.getTableDataList(1)},computed:Object(o["a"])({},Object(i["b"])(["name","roles"])),methods:{getCOSParam:function(){var e=this;this.$http.post("".concat(l["a"].baseUrl,"/agentAccount/getCosKey")).then(function(t){if("0000"==t.data.code){var a=t.data.data.liveList;e.cos=new c.a({AppId:a.Appid,SecretId:a.SecretId,SecretKey:a.SecretKey}),e.Bucket=a.Bucket,e.Region=a.Region}}).catch(function(e){console.log(e)})},getTableDataList:function(e){var t=this,a={data:{signInUserId:this.$store.getters.userId,signInRoleId:this.$store.getters.roleId,pageNum:e,pageSize:10,month:this.queryForm.profitTime,agentName:this.queryForm.agentName,check_status:this.queryForm.check_status,revenue_status:this.queryForm.revenue_status}};this.tableLoading=!0,this.$http.post("".concat(l["a"].baseUrl,"/agentAccount/getAgentAccountRecord"),a).then(function(e){"0000"==e.data.code&&(t.tableData=e.data.data.agentAccountList,t.pageTotal=e.data.data.page.pageTotal,t.tableLoading=!1)}).catch(function(e){})},queryData:function(){this.getTableDataList(1),this.currentPage=1},handle_exportAccount:function(e){var t=this;console.log(e),this.$confirm("是否出账?","出账",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",size:"mini",center:!0}).then(function(){var a={data:{agent_accountid:e.agent_accountid,revenue_status:4}};t.$http.post("".concat(l["a"].baseUrl,"/agentAccount/confirmPayment"),a).then(function(e){"0000"==e.data.code?(t.m_message(e.data.msg,"success"),t.handle_refresh()):t.m_message(e.data.msg,"warning")}).catch(function(e){})})},handle_refresh:function(){this.getTableDataList(this.currentPage)},beforeInvoiceUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;if(!t)return this.m_message("只能上传图片","warning"),!1},handleUpload:function(e){var t=this,a=e.file;if(a){var n=a.name,r=(a.size,a.type,(new Date).getTime(),"InvoiceImg/"+(new Date).getTime()+n);this._key=r,t.invoice_loading=!0,t.cos.sliceUploadFile({Bucket:t.Bucket,Region:t.Region,Key:r,Body:a,onProgress:function(e){console.log(e)}},function(e,a){200==a.statusCode&&(t.invoice_loading=!1)})}},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.invoiceDialogVisible=!0},handleRemove:function(e,t){console.log(e,t)},limitTip:function(){this.m_message("只能上传一张","warning")},handle_upload:function(e){this.dialogImageUrl="",this.add_dialog=!0,this.agent_accountid=e.agent_accountid},saveData:function(){var e=this,t={data:{agent_accountid:this.agent_accountid+"",invoice_url:"/"+this._key}};this.invoice_loading=!0,this.$http.post("".concat(l["a"].baseUrl,"/agentAccount/uploadInvoice"),t).then(function(t){"0000"==t.data.code&&(e.invoice_loading=!1,e.add_dialog=!1,e.m_message(t.data.msg,"success"),e.$refs.uploadRef.clearFiles(),e.getTableDataList(1))}).catch(function(e){})},view_upload:function(e){var t=this,a={data:{agent_accountid:e.agent_accountid+""}};this.viewImageUrl="",this.view_dialog=!0,this.view_loading=!0,this.$http.post("".concat(l["a"].baseUrl,"/agentAccount/checkInvoices"),a).then(function(e){"0000"==e.data.code&&(t.viewImageUrl=e.data.data.agentAccount.invoice_url,t.view_loading=!1)}).catch(function(e){})},exportAccount:function(){var e={data:{signInUserId:this.$store.getters.userId,signInRoleId:this.$store.getters.roleId,month:this.queryForm.profitTime,agentName:this.queryForm.agentName,check_status:this.queryForm.check_status,revenue_status:this.queryForm.revenue_status}};window.location.href="\n      ".concat(l["a"].baseUrl,"/agentAccount/exportAgentAccount?\n      signInUserId=").concat(e.data.signInUserId,"&\n      signInRoleId=").concat(e.data.signInRoleId,"&\n      agentName=").concat(e.data.agentName,"&\n      month=").concat(e.data.month,"&\n      revenue_status=").concat(e.data.revenue_status,"\n      ")},uploadAccount:function(){},changeOption_reviewState:function(e){},changeOption_exportAccount:function(e){},handleCurrentChange:function(e){this.currentPage=e,this.getTableDataList(e)},resetData:function(e){this.$refs[e].resetFields()},m_message:function(e,t){this.$message({message:e,type:t})}}},d=u,p=(a("037b"),a("1b9e"),a("2877")),f=Object(p["a"])(d,n,r,!1,null,"7b44d94d",null);t["default"]=f.exports},f33c:function(e,t,a){}}]);