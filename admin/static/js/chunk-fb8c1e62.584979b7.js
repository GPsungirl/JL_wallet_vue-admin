(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fb8c1e62"],{"28a5":function(t,e,a){"use strict";var i=a("aae3"),n=a("cb7c"),l=a("ebd6"),o=a("0390"),s=a("9def"),r=a("5f1b"),c=a("520a"),d=a("79e5"),u=Math.min,_=[].push,h="split",g="length",m="lastIndex",p=4294967295,f=!d(function(){RegExp(p,"y")});a("214f")("split",2,function(t,e,a,d){var v;return v="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[g]||2!="ab"[h](/(?:ab)*/)[g]||4!="."[h](/(.?)(.?)/)[g]||"."[h](/()()/)[g]>1||""[h](/.?/)[g]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!i(t))return a.call(n,t,e);var l,o,s,r=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,h=void 0===e?p:e>>>0,f=new RegExp(t.source,d+"g");while(l=c.call(f,n)){if(o=f[m],o>u&&(r.push(n.slice(u,l.index)),l[g]>1&&l.index<n[g]&&_.apply(r,l.slice(1)),s=l[0][g],u=o,r[g]>=h))break;f[m]===l.index&&f[m]++}return u===n[g]?!s&&f.test("")||r.push(""):r.push(n.slice(u)),r[g]>h?r.slice(0,h):r}:"0"[h](void 0,0)[g]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,i){var n=t(this),l=void 0==a?void 0:a[e];return void 0!==l?l.call(a,n,i):v.call(String(n),a,i)},function(t,e){var i=d(v,t,this,e,v!==a);if(i.done)return i.value;var c=n(t),_=String(this),h=l(c,RegExp),g=c.unicode,m=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(f?"y":"g"),b=new h(f?c:"^(?:"+c.source+")",m),y=void 0===e?p:e>>>0;if(0===y)return[];if(0===_.length)return null===r(b,_)?[_]:[];var w=0,k=0,x=[];while(k<_.length){b.lastIndex=f?k:0;var C,F=r(b,f?_:_.slice(k));if(null===F||(C=u(s(b.lastIndex+(f?0:k)),_.length))===w)k=o(_,k,g);else{if(x.push(_.slice(w,k)),x.length===y)return x;for(var D=1;D<=F.length-1;D++)if(x.push(F[D]),x.length===y)return x;k=w=C}}return x.push(_.slice(w)),x}]})},"6ee9":function(t,e,a){},ab07:function(t,e,a){"use strict";var i=a("6ee9"),n=a.n(i);n.a},c616:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pad_5"},[a("div",{staticClass:"query_fields pad_b_no"},[a("el-form",{ref:"queryForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.queryForm,size:"mini"}},[a("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[a("el-input",{staticClass:"wid_140",attrs:{placeholder:"请输入昵称"},model:{value:t.queryForm.nickname,callback:function(e){t.$set(t.queryForm,"nickname",e)},expression:"queryForm.nickname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"用户ID",prop:"customid"}},[a("el-input",{staticClass:"wid_140",attrs:{placeholder:"请输入用户ID"},model:{value:t.queryForm.customid,callback:function(e){t.$set(t.queryForm,"customid",e)},expression:"queryForm.customid"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"客户类别",prop:"custom_type"}},[a("el-select",{staticClass:"wid_140",attrs:{placeholder:"请选择客户类别"},model:{value:t.queryForm.custom_type,callback:function(e){t.$set(t.queryForm,"custom_type",e)},expression:"queryForm.custom_type"}},t._l(t.queryForm.custom_types,function(t,e){return a("el-option",{key:e,attrs:{label:t.txt,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.resetData("queryForm")}}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handle_refresh}},[t._v("刷新")])],1)],1)],1),t._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"customid",label:"用户ID",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"昵称","show-overflow-tooltip":!0,width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"电话",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"性别",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.sex?a("span",[t._v("男")]):t._e(),t._v(" "),2==e.row.sex?a("span",[t._v("女")]):t._e(),t._v(" "),0==e.row.sex?a("span",[t._v("未知")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"地址",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.province+e.row.city))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"客户类别",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.custom_type?a("span",[t._v("普通客户")]):1==e.row.custom_type?a("span",[t._v("兼职向导")]):2==e.row.custom_type?a("span",[t._v("全职向导")]):3==e.row.custom_type?a("span",[t._v("角落客服")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handle_detail(e.row)}}},[t._v("聊天列表")])]}}])})],1),t._v(" "),a("div",{staticClass:"block mar_t10"},[a("el-pagination",{attrs:{"current-page":t.currentPage,total:t.pageTotal,"page-size":t.pageSize,background:"",layout:"total, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.detail_loading,expression:"detail_loading"}],staticClass:"agent_detail",attrs:{title:t.detailForm.detailForm_title+"的聊天记录",visible:t.dialogVisible_detail,width:"50%",center:"","append-to-body":"","close-on-click-modal":!1,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"update:visible":function(e){t.dialogVisible_detail=e}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.detail_tableLoading,expression:"detail_tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.detail_tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"first_account",label:"发送者ID",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"from_nickname",label:"发送者昵称",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"second_account",label:"接收者ID",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"to_nickname",label:"接收者昵称",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handle_view(e.row)}}},[t._v("聊天详情")])]}}])})],1),t._v(" "),a("div",{staticClass:"block mar_t10"},[a("el-pagination",{attrs:{"current-page":t.currentPage_detail,total:t.pageTotal_detail,background:"",layout:"total, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange_detail}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(e){t.dialogVisible_detail=!1}}},[t._v("关 闭")])],1),t._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.chat_loading,expression:"chat_loading"}],staticClass:"chat_dialog",attrs:{title:"聊天详情",visible:t.chat_dialogVisible,width:"30%",top:"1vh",center:"","append-to-body":"","close-on-click-modal":!1,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"update:visible":function(e){t.chat_dialogVisible=e}}},[a("div",{staticClass:"chat_detail"},t._l(t.chatForm.chatInfo_arr,function(e){return a("div",{key:e.chat_id,staticClass:"detai_wrap"},[t.chatForm.from_chatter==e.from_account?a("div",{staticClass:"clearfloat"},[a("h5",{staticClass:"chat_title text_l"},[t._v("\n              "+t._s(e.from_nickname)+"("+t._s(e.from_account)+") "+t._s(new Date(1e3*e.msg_time).toLocaleString())+"\n            ")]),t._v(" "),0==e.msg_type?a("div",{staticClass:"chat_content fl"},[t._v("\n              "+t._s(e.msg_content)+"\n            ")]):1==e.msg_type?a("div",{staticClass:"chat_content fl"},[a("el-image",{staticStyle:{"max-width":"30px","max-height":"50px"},attrs:{src:e.img_min_url,"preview-src-list":[e.img_src_url]}})],1):t._e()]):a("div",{staticClass:"clearfloat"},[a("h5",{staticClass:"chat_title text_r"},[t._v("\n              "+t._s(e.from_nickname)+"("+t._s(e.from_account)+") "+t._s(new Date(1e3*e.msg_time).toLocaleString())+"\n            ")]),t._v(" "),0==e.msg_type?a("div",{staticClass:"chat_content fr"},[t._v("\n              "+t._s(e.msg_content)+"\n            ")]):1==e.msg_type?a("div",{staticClass:"chat_content fr"},[a("el-image",{staticStyle:{"max-width":"30px","max-height":"50px"},attrs:{src:e.img_min_url,"preview-src-list":[e.img_src_url]}})],1):t._e()])])}),0),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"block mar_t10"},[a("el-pagination",{attrs:{"current-page":t.currentPage_chat,total:t.pageTotal_chat,"page-size":t.pageSize_chat,background:"",small:"",layout:"total, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange_chat}})],1),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.chat_dialogVisible=!1}}},[t._v("关 闭")])],1)])],1)],1)},n=[],l=(a("28a5"),a("cf45")),o={name:"chatInfoRecord",data:function(){return{roleId:"",tableLoading:!1,tableData:[],pageTotal:100,currentPage:1,pageSize:10,queryForm:{nickname:"",customid:"",custom_types:[{id:"0",txt:"普通客户"},{id:1,txt:"兼职向导"},{id:2,txt:"全职向导"},{id:3,txt:"角落客服"}],custom_type:""},detail_tableData:[],detail_tableLoading:!1,pageTotal_detail:100,currentPage_detail:1,dialogVisible_detail:!1,detail_loading:!1,detailForm:{detailForm_title:"",customid:""},chat_dialogVisible:!1,chat_loading:!1,pageTotal_chat:100,currentPage_chat:1,pageSize_chat:20,chatForm:{msg_group:"",chatInfo_arr:[],from_chatter:""}}},created:function(){this.initDate(),this.getTableDataList(1),this.roleId=this.$store.getters.roleId},methods:{getTableDataList:function(t){var e=this,a={data:{signInUserId:this.$store.getters.userId,signInRoleId:this.$store.getters.roleId,customid:this.queryForm.customid,nickname:this.queryForm.nickname,custom_type:this.queryForm.custom_type,pageNum:t,pageSize:this.pageSize}};this.tableLoading=!0,this.$http.post("".concat(l["a"].baseUrl,"/chatInfo/getChatInfoMainList"),a).then(function(t){"0000"==t.data.code&&(console.log(t),e.tableLoading=!1,e.tableData=t.data.data.chatInfoMainList,e.pageTotal=t.data.data.page.pageTotal)}).catch(function(t){})},queryData:function(){this.getTableDataList(1),this.currentPage=1},resetData:function(t){this.$refs[t].resetFields(),this.queryForm.startTime="",this.queryForm.endTime=""},handle_refresh:function(){this.getTableDataList(this.currentPage)},handle_detail:function(t){this.detailForm.detailForm_title=t.nickname,this.detailForm.customid=t.customid,this.dialogVisible_detail=!0,this.getTableDataList_detail(1)},getTableDataList_detail:function(t){var e=this,a={data:{pageNum:t,pageSize:10,customid:this.detailForm.customid}};this.detail_loading=!0,this.$http.post("".concat(l["a"].baseUrl,"/chatInfo/getChatInfoGroupList"),a).then(function(t){"0000"==t.data.code&&(e.detail_tableData=t.data.data.chatInfoGroupList,e.pageTotal_detail=t.data.data.page.pageTotal,e.detail_loading=!1)}).catch(function(t){})},handleCurrentChange:function(t){this.currentPage=t,this.getTableDataList(t)},handleCurrentChange_detail:function(t){this.currentPage_detail=t,this.getTableDataList_detail(t)},handle_view:function(t){this.chat_dialogVisible=!0,this.chatForm.msg_group=t.msg_group,this.chatForm.from_chatter=t.msg_group.split("-")[0],console.log(this.chatForm.from_chatter),this.getDataList_chat(1)},getDataList_chat:function(t){var e=this,a={data:{pageNum:t,pageSize:this.pageSize_chat,msg_group:this.chatForm.msg_group}};this.chat_loading=!0,this.$http.post("".concat(l["a"].baseUrl,"/chatInfo/getChatInfoList"),a).then(function(t){if("0000"==t.data.code){var a=t.data.data.chatInfoList;e.chatForm.chatInfo_arr=a.reverse(),console.log(t),e.pageTotal_chat=t.data.data.page.pageTotal,e.chat_loading=!1}}).catch(function(t){})},handleCurrentChange_chat:function(t){this.currentPage_chat=t,this.getDataList_chat(t)},m_valid_addForm:function(t){var e=!1;return this.$refs[t].validate(function(t){return t?(e=!0,!0):(e=!1,!1)}),e},m_message:function(t,e){this.$message({message:t,type:e})},initDate:function(){Date.prototype.toLocaleString=function(){return this.getFullYear()+"-"+(this.getMonth()+1)+"-"+this.getDate()+" "+this.getHours()+":"+this.getMinutes()+":"+this.getSeconds()}}}},s=o,r=(a("ab07"),a("2877")),c=Object(r["a"])(s,i,n,!1,null,"e924d130",null);e["default"]=c.exports}}]);
