(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a3b8f6d2"],{"3a00":function(e,t,a){},4127:function(e,t,a){"use strict";var i=a("d233"),r=a("b313"),n={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},o=Date.prototype.toISOString,l={delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,serializeDate:function(e){return o.call(e)},skipNulls:!1,strictNullHandling:!1},c=function e(t,a,r,n,o,c,s,d,u,f,p,g){var m=t;if("function"===typeof s)m=s(a,m);else if(m instanceof Date)m=f(m);else if(null===m){if(n)return c&&!g?c(a,l.encoder):a;m=""}if("string"===typeof m||"number"===typeof m||"boolean"===typeof m||i.isBuffer(m)){if(c){var h=g?a:c(a,l.encoder);return[p(h)+"="+p(c(m,l.encoder))]}return[p(a)+"="+p(String(m))]}var _,v=[];if("undefined"===typeof m)return v;if(Array.isArray(s))_=s;else{var b=Object.keys(m);_=d?b.sort(d):b}for(var y=0;y<_.length;++y){var k=_[y];o&&null===m[k]||(v=Array.isArray(m)?v.concat(e(m[k],r(a,k),r,n,o,c,s,d,u,f,p,g)):v.concat(e(m[k],a+(u?"."+k:"["+k+"]"),r,n,o,c,s,d,u,f,p,g)))}return v};e.exports=function(e,t){var a=e,o=t?i.assign({},t):{};if(null!==o.encoder&&void 0!==o.encoder&&"function"!==typeof o.encoder)throw new TypeError("Encoder has to be a function.");var s="undefined"===typeof o.delimiter?l.delimiter:o.delimiter,d="boolean"===typeof o.strictNullHandling?o.strictNullHandling:l.strictNullHandling,u="boolean"===typeof o.skipNulls?o.skipNulls:l.skipNulls,f="boolean"===typeof o.encode?o.encode:l.encode,p="function"===typeof o.encoder?o.encoder:l.encoder,g="function"===typeof o.sort?o.sort:null,m="undefined"!==typeof o.allowDots&&o.allowDots,h="function"===typeof o.serializeDate?o.serializeDate:l.serializeDate,_="boolean"===typeof o.encodeValuesOnly?o.encodeValuesOnly:l.encodeValuesOnly;if("undefined"===typeof o.format)o.format=r["default"];else if(!Object.prototype.hasOwnProperty.call(r.formatters,o.format))throw new TypeError("Unknown format option provided.");var v,b,y=r.formatters[o.format];"function"===typeof o.filter?(b=o.filter,a=b("",a)):Array.isArray(o.filter)&&(b=o.filter,v=b);var k,w=[];if("object"!==typeof a||null===a)return"";k=o.arrayFormat in n?o.arrayFormat:"indices"in o?o.indices?"indices":"repeat":"indices";var j=n[k];v||(v=Object.keys(a)),g&&v.sort(g);for(var O=0;O<v.length;++O){var A=v[O];u&&null===a[A]||(w=w.concat(c(a[A],A,j,d,u,f?p:null,b,g,m,h,y,_)))}var x=w.join(s),D=!0===o.addQueryPrefix?"?":"";return x.length>0?D+x:""}},4328:function(e,t,a){"use strict";var i=a("4127"),r=a("9e6a"),n=a("b313");e.exports={formats:n,parse:r,stringify:i}},"439c":function(e,t,a){"use strict";var i=a("4c49"),r=a.n(i);r.a},"4c49":function(e,t,a){},"9e6a":function(e,t,a){"use strict";var i=a("d233"),r=Object.prototype.hasOwnProperty,n={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:i.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},o=function(e,t){for(var a={},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=t.parameterLimit===1/0?void 0:t.parameterLimit,l=i.split(t.delimiter,o),c=0;c<l.length;++c){var s,d,u=l[c],f=u.indexOf("]="),p=-1===f?u.indexOf("="):f+1;-1===p?(s=t.decoder(u,n.decoder),d=t.strictNullHandling?null:""):(s=t.decoder(u.slice(0,p),n.decoder),d=t.decoder(u.slice(p+1),n.decoder)),r.call(a,s)?a[s]=[].concat(a[s]).concat(d):a[s]=d}return a},l=function(e,t,a){for(var i=t,r=e.length-1;r>=0;--r){var n,o=e[r];if("[]"===o)n=[],n=n.concat(i);else{n=a.plainObjects?Object.create(null):{};var l="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=parseInt(l,10);!isNaN(c)&&o!==l&&String(c)===l&&c>=0&&a.parseArrays&&c<=a.arrayLimit?(n=[],n[c]=i):n[l]=i}i=n}return i},c=function(e,t,a){if(e){var i=a.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,n=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,c=n.exec(i),s=c?i.slice(0,c.index):i,d=[];if(s){if(!a.plainObjects&&r.call(Object.prototype,s)&&!a.allowPrototypes)return;d.push(s)}var u=0;while(null!==(c=o.exec(i))&&u<a.depth){if(u+=1,!a.plainObjects&&r.call(Object.prototype,c[1].slice(1,-1))&&!a.allowPrototypes)return;d.push(c[1])}return c&&d.push("["+i.slice(c.index)+"]"),l(d,t,a)}};e.exports=function(e,t){var a=t?i.assign({},t):{};if(null!==a.decoder&&void 0!==a.decoder&&"function"!==typeof a.decoder)throw new TypeError("Decoder has to be a function.");if(a.ignoreQueryPrefix=!0===a.ignoreQueryPrefix,a.delimiter="string"===typeof a.delimiter||i.isRegExp(a.delimiter)?a.delimiter:n.delimiter,a.depth="number"===typeof a.depth?a.depth:n.depth,a.arrayLimit="number"===typeof a.arrayLimit?a.arrayLimit:n.arrayLimit,a.parseArrays=!1!==a.parseArrays,a.decoder="function"===typeof a.decoder?a.decoder:n.decoder,a.allowDots="boolean"===typeof a.allowDots?a.allowDots:n.allowDots,a.plainObjects="boolean"===typeof a.plainObjects?a.plainObjects:n.plainObjects,a.allowPrototypes="boolean"===typeof a.allowPrototypes?a.allowPrototypes:n.allowPrototypes,a.parameterLimit="number"===typeof a.parameterLimit?a.parameterLimit:n.parameterLimit,a.strictNullHandling="boolean"===typeof a.strictNullHandling?a.strictNullHandling:n.strictNullHandling,""===e||null===e||"undefined"===typeof e)return a.plainObjects?Object.create(null):{};for(var r="string"===typeof e?o(e,a):e,l=a.plainObjects?Object.create(null):{},s=Object.keys(r),d=0;d<s.length;++d){var u=s[d],f=c(u,r[u],a);l=i.merge(l,f,a)}return i.compact(l)}},a475:function(e,t,a){"use strict";var i=a("3a00"),r=a.n(i);r.a},b313:function(e,t,a){"use strict";var i=String.prototype.replace,r=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return i.call(e,r,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},d233:function(e,t,a){"use strict";var i=Object.prototype.hasOwnProperty,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),n=function(e){var t;while(e.length){var a=e.pop();if(t=a.obj[a.prop],Array.isArray(t)){for(var i=[],r=0;r<t.length;++r)"undefined"!==typeof t[r]&&i.push(t[r]);a.obj[a.prop]=i}}return t},o=function(e,t){for(var a=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)"undefined"!==typeof e[i]&&(a[i]=e[i]);return a},l=function e(t,a,r){if(!a)return t;if("object"!==typeof a){if(Array.isArray(t))t.push(a);else{if("object"!==typeof t)return[t,a];(r.plainObjects||r.allowPrototypes||!i.call(Object.prototype,a))&&(t[a]=!0)}return t}if("object"!==typeof t)return[t].concat(a);var n=t;return Array.isArray(t)&&!Array.isArray(a)&&(n=o(t,r)),Array.isArray(t)&&Array.isArray(a)?(a.forEach(function(a,n){i.call(t,n)?t[n]&&"object"===typeof t[n]?t[n]=e(t[n],a,r):t.push(a):t[n]=a}),t):Object.keys(a).reduce(function(t,n){var o=a[n];return i.call(t,n)?t[n]=e(t[n],o,r):t[n]=o,t},n)},c=function(e,t){return Object.keys(t).reduce(function(e,a){return e[a]=t[a],e},e)},s=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},d=function(e){if(0===e.length)return e;for(var t="string"===typeof e?e:String(e),a="",i=0;i<t.length;++i){var n=t.charCodeAt(i);45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122?a+=t.charAt(i):n<128?a+=r[n]:n<2048?a+=r[192|n>>6]+r[128|63&n]:n<55296||n>=57344?a+=r[224|n>>12]+r[128|n>>6&63]+r[128|63&n]:(i+=1,n=65536+((1023&n)<<10|1023&t.charCodeAt(i)),a+=r[240|n>>18]+r[128|n>>12&63]+r[128|n>>6&63]+r[128|63&n])}return a},u=function(e){for(var t=[{obj:{o:e},prop:"o"}],a=[],i=0;i<t.length;++i)for(var r=t[i],o=r.obj[r.prop],l=Object.keys(o),c=0;c<l.length;++c){var s=l[c],d=o[s];"object"===typeof d&&null!==d&&-1===a.indexOf(d)&&(t.push({obj:o,prop:s}),a.push(d))}return n(t)},f=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},p=function(e){return null!==e&&"undefined"!==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};e.exports={arrayToObject:o,assign:c,compact:u,decode:s,encode:d,isBuffer:p,isRegExp:f,merge:l}},dec7:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pad_5"},[a("div",{staticClass:"query_fields"},[a("el-form",{ref:"queryForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryForm,size:"mini"}},[a("el-form-item",{attrs:{label:"机构名称",prop:"agentName"}},[a("el-input",{staticClass:"wid_140",attrs:{placeholder:"请输入机构名称"},model:{value:e.queryForm.agentName,callback:function(t){e.$set(e.queryForm,"agentName",t)},expression:"queryForm.agentName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收益周期",prop:"profitTime"}},[a("el-date-picker",{staticClass:"wid_140",attrs:{type:"month","value-format":"yyyy-MM",placeholder:"请选择时间"},model:{value:e.queryForm.profitTime,callback:function(t){e.$set(e.queryForm,"profitTime",t)},expression:"queryForm.profitTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.queryData}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.resetData("queryForm")}}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handle_refresh}},[e._v("刷新")])],1)],1)],1),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"agentName",label:"机构名称",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"virtualMonthTotal",label:"贝壳收益(元)",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountMonthTotal",label:"出行收益(元)",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalAmont",label:"总收益(元)",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"month",label:"收益周期",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.view_upload(t.row)}}},[e._v("查看发票")]),e._v(" "),1!=e.roleId?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handle_check(t.row)}}},[e._v("审核")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"block mar_t10"},[a("el-pagination",{attrs:{"current-page":e.currentPage,total:e.pageTotal,background:"",layout:"total, prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.invoice_loading,expression:"invoice_loading"}],attrs:{title:"上传发票",visible:e.add_dialog,width:"30%",center:"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"update:visible":function(t){e.add_dialog=t}}},[a("div",{staticClass:"wid_b75"},[a("el-upload",{ref:"uploadRef",attrs:{action:"#","http-request":e.handleUpload,"before-upload":e.beforeInvoiceUpload,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-exceed":e.limitTip,limit:1}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{staticClass:"invoiceimg_wrap",attrs:{title:"查看发票",visible:e.invoiceDialogVisible,"append-to-body":"",center:"",top:"10vh"},on:{"update:visible":function(t){e.invoiceDialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.add_dialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveData}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.view_loading,expression:"view_loading"}],attrs:{title:"查看发票",visible:e.view_dialog,width:"30%",center:"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"update:visible":function(t){e.view_dialog=t}}},[a("img",{attrs:{width:"100%",src:e.viewImageUrl,alt:""}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.view_dialog=!1}}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.detail_check_loading,expression:"detail_check_loading"}],attrs:{title:"审核",visible:e.detail_check_dialogVisible,width:"30%",center:"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"update:visible":function(t){e.detail_check_dialogVisible=t}}},[a("el-form",{ref:"detail_check_form",staticClass:"demo-ruleForm demo-form-inline valid_form",attrs:{inline:!0,model:e.detail_check_form,rules:e.detail_check_rules}},[a("el-form-item",{attrs:{label:"审核状态",prop:"merchant_check","label-width":"80px"}},[a("el-radio-group",{on:{change:function(t){return e.selectedAgentCheck(t)}},model:{value:e.detail_check_form.merchant_check,callback:function(t){e.$set(e.detail_check_form,"merchant_check",t)},expression:"detail_check_form.merchant_check"}},[a("el-radio",{attrs:{label:"3"}},[e._v("拒绝")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("通过")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"审核说明",prop:"check_remark","label-width":"80px"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.detail_check_form.check_remark,callback:function(t){e.$set(e.detail_check_form,"check_remark",t)},expression:"detail_check_form.check_remark"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.detail_check_dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.save_check}},[e._v("确 定")])],1)],1)],1)},r=[],n=(a("7f7f"),a("db72")),o=a("2f62"),l=a("cf45"),c=(a("4328"),a("bc3a"),a("3438")),s=a.n(c),d={name:"agentAccountExamine",data:function(){return{roleId:"",cos:"",Bucket:"",Region:"",tableLoading:!1,view_loading:!1,tableData:[],invoice_loading:!1,invoiceDialogVisible:!1,detail_check_dialogVisible:!1,detail_check_loading:!1,queryForm:{agentName:"",profitTime:""},pageTotal:0,currentPage:1,add_dialog:!1,view_dialog:!1,dialogImageUrl:"",viewImageUrl:"",agent_accountid:"",_key:"",check_dialog:!1,check_loading:!1,detail_check_form:{agent_accountid:"",merchant_checks:[{id:1,txt:"待审核"},{id:2,txt:"审核通过"},{id:3,txt:"审核拒绝"}],merchant_check:"3",check_remark:""},detail_check_rules:{check_remark:[{required:!0,message:"请输入拒绝原因",trigger:"blur"}]}}},created:function(){this.roleId=this.$store.getters.roleId,this.getCOSParam(),this.getTableDataList(1)},computed:Object(n["a"])({},Object(o["b"])(["name","roles"])),methods:{getCOSParam:function(){var e=this;this.$http.post("".concat(l["a"].baseUrl,"/agentAccount/getCosKey")).then(function(t){if("0000"==t.data.code){var a=t.data.data.liveList;e.cos=new s.a({AppId:a.Appid,SecretId:a.SecretId,SecretKey:a.SecretKey}),e.Bucket=a.Bucket,e.Region=a.Region}}).catch(function(e){console.log(e)})},getTableDataList:function(e){var t=this,a={data:{signInUserId:this.$store.getters.userId,signInRoleId:this.$store.getters.roleId,pageNum:e,pageSize:10,month:this.queryForm.profitTime,agentName:this.queryForm.agentName}};this.tableLoading=!0,this.$http.post("".concat(l["a"].baseUrl,"/agentAccount/getAgentAccountAuditor"),a).then(function(e){"0000"==e.data.code&&(t.tableData=e.data.data.agentAccountList,t.pageTotal=e.data.data.page.pageTotal,t.tableLoading=!1)}).catch(function(e){})},handle_check:function(e){this.detail_check_form.agent_accountid=e.agent_accountid,this.detail_check_dialogVisible=!0,this.resetData("detail_check_form")},selectedAgentCheck:function(e){this.detail_check_rules.check_remark="2"==e?null:[{required:!0,message:"请输入审核说明",trigger:"blur"}]},save_check:function(){var e=this;if(this.m_valid_addForm("detail_check_form")){var t={data:{signInUserId:this.$store.getters.userId,signInRoleId:this.$store.getters.roleId,userid:this.detail_check_form.userid,agent_accountid:this.detail_check_form.agent_accountid,check_status:this.detail_check_form.merchant_check,check_remark:this.detail_check_form.check_remark}};this.detail_check_loading=!0,this.$http.post("".concat(l["a"].baseUrl,"/agentAccount/agentAccountAuditor"),t).then(function(t){"0000"==t.data.code&&(e.detail_check_loading=!1,e.detail_check_dialogVisible=!1,e.m_message(t.data.msg,"success"),e.handle_refresh(1))}).catch(function(e){})}},m_valid_addForm:function(e){var t=!1;return this.$refs[e].validate(function(e){return e?(t=!0,!0):(t=!1,!1)}),t},queryData:function(){this.getTableDataList(1),this.currentPage=1},handle_refresh:function(){this.getTableDataList(this.currentPage)},beforeInvoiceUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;if(!t)return this.m_message("只能上传图片","warning"),!1},handleUpload:function(e){var t=this,a=e.file;if(a){var i=a.name,r=(a.size,a.type,(new Date).getTime(),"InvoiceImg/"+(new Date).getTime()+i);this._key=r,t.invoice_loading=!0,t.cos.sliceUploadFile({Bucket:t.Bucket,Region:t.Region,Key:r,Body:a,onProgress:function(e){console.log(e)}},function(e,a){200==a.statusCode&&(t.invoice_loading=!1)})}},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.invoiceDialogVisible=!0},handleRemove:function(e,t){console.log(e,t)},limitTip:function(){this.m_message("只能上传一张","warning")},handle_upload:function(e){this.dialogImageUrl="",this.add_dialog=!0,this.agent_accountid=e.agent_accountid},saveData:function(){var e=this,t={data:{agent_accountid:this.agent_accountid+"",invoice_url:"/"+this._key}};this.invoice_loading=!0,this.$http.post("".concat(l["a"].baseUrl,"/agentAccount/uploadInvoice"),t).then(function(t){"0000"==t.data.code&&(e.invoice_loading=!1,e.add_dialog=!1,e.m_message(t.data.msg,"success"),e.$refs.uploadRef.clearFiles(),e.getTableDataList(1))}).catch(function(e){})},view_upload:function(e){var t=this,a={data:{agent_accountid:e.agent_accountid+""}};this.viewImageUrl="",this.view_dialog=!0,this.view_loading=!0,this.$http.post("".concat(l["a"].baseUrl,"/agentAccount/checkInvoices"),a).then(function(e){"0000"==e.data.code&&(t.viewImageUrl=e.data.data.agentAccount.invoice_url,t.view_loading=!1)}).catch(function(e){})},changeProfitState:function(e){},handleCurrentChange:function(e){this.currentPage=e,this.getTableDataList(e)},resetData:function(e){this.$refs[e].resetFields()},m_message:function(e,t){this.$message({message:e,type:t})}}},u=d,f=(a("439c"),a("a475"),a("2877")),p=Object(f["a"])(u,i,r,!1,null,"9bcc4008",null);t["default"]=p.exports}}]);